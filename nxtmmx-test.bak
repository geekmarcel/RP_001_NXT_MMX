#include "NXTMMX-lib.nxc"

#define SensorPort S1
const byte Addr = 0x06;

task main()           // main task:
{
  int v;
	long tach;
	string msg;

	MMX_Init( SensorPort, Addr, 0 );

  MMX_Run_Unlimited(SensorPort, Addr, MMX_Motor_Both, MMX_Direction_Forward, MMX_Speed_Full);

	PlayTone (400, 50);
    //v = MMX_GetBattVoltage(SensorPort, Addr);

	Wait(200);
	msg = "ORNG Btn to Stop";
	TextOut(0, LCD_LINE2, msg, false);

	until(ButtonPressed(BTNCENTER, true));
	/*
	 * Stop both the motors,
	 * while stopping float the motors.
	 */
	MMX_Stop(SensorPort, Addr, MMX_Motor_Both, MMX_Next_Action_Brake);
	Wait(500);
	until(ButtonPressed(BTNCENTER, true));
}
